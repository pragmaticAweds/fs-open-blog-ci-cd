import{r as l,j as s,c as d,u as C,B as i,l as w,a as c,b as B,d as k,e as R,f as v}from"./index-CDRNsZUT.js";const x=l.forwardRef(({className:e,...a},t)=>s.jsx("div",{ref:t,className:d("rounded-lg border bg-card text-card-foreground shadow-sm",e),...a}));x.displayName="Card";const m=l.forwardRef(({className:e,...a},t)=>s.jsx("div",{ref:t,className:d("flex flex-col space-y-1 p-6",e),...a}));m.displayName="CardHeader";const f=l.forwardRef(({className:e,...a},t)=>s.jsx("h3",{ref:t,className:d("text-2xl font-semibold leading-none tracking-tight",e),...a}));f.displayName="CardTitle";const _=l.forwardRef(({className:e,...a},t)=>s.jsx("p",{ref:t,className:d("text-sm text-muted-foreground",e),...a}));_.displayName="CardDescription";const p=l.forwardRef(({className:e,...a},t)=>s.jsx("div",{ref:t,className:d("p-6 pt-0",e),...a}));p.displayName="CardContent";const u=l.forwardRef(({className:e,...a},t)=>s.jsx("div",{ref:t,className:d("flex items-center p-6 pt-0",e),...a}));u.displayName="CardFooter";const D=({blog:e})=>{const a=C().userId,[t,h]=l.useState(!1),j=()=>h(r=>!r),g=async()=>{try{const{data:r,status:n,message:o}=await w(e._id);if(n){c(o,{type:"success"}),B(r);return}c(o,{type:"error"})}catch(r){console.log(r)}},N=async()=>{try{const{status:r,message:n}=await k(e._id);if(r){c(n,{type:"success"}),R(e._id);return}c(n,{type:"error"})}catch(r){console.log(r)}},y=e.User===a;return s.jsxs(x,{"data-testid":"blog",children:[s.jsx(m,{children:s.jsx(f,{children:e.title})}),s.jsxs(p,{className:"flex flex-col space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"font-medium text-lg",children:["By: ",e.author]}),y?s.jsx(i,{label:"Delete",className:"px-4 max-w-max bg-red-800","data-testid":"blog-delete",onClick:N}):null]}),s.jsxs("div",{className:"flex items-center",children:[s.jsxs("span",{className:"flex-1 font-medium","data-testid":"blog-likes-count",children:["Likes: ",e.likes.length]}),s.jsx(i,{label:"Like",className:"px-4 max-w-max","data-testid":"blog-likes",onClick:g})]}),t?s.jsx(s.Fragment,{children:s.jsxs("div",{children:["Read: ",s.jsx("a",{href:e.url,children:e.url})]})}):null]}),s.jsx(u,{children:s.jsx(i,{label:t?"Hide":"View",onClick:j})})]},e._id)},H=()=>{const{blogs:e}=v();return s.jsx("main",{className:"p-4 gap-8 flex flex-col w-1/2",children:e==null?void 0:e.sort((a,t)=>t.likes.length-a.likes.length).map(a=>s.jsx(D,{blog:a},a._id))})};export{H as default};
